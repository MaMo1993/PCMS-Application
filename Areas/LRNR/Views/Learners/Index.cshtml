@model IEnumerable<PCMS_Application.Models.TblLearner>

@{
    ViewBag.Title = "Learners";

    if (TempData["DelFail"] != null)
    {
        <link href="~/Content/plugins/sweetalert/sweetalert.css" rel="stylesheet" />
        <script src="~/Scripts/plugins/sweetalert/sweetalert.min.js"></script>
        <script type="text/javascript">
            swal("Actiion Failed!",@Html.Raw(Json.Encode(TempData["DelFail"])), "error");
        </script>
    }
}

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">

            <div class="ibox float-e-margins" style="box-shadow: 0 0 10px #808080">
                <div class="ibox col-lg-12" style="box-shadow: 0 0 10px #808080">
                    <div class="ibox-title">

                        <a title="Back to Learners Navigation" class="btn btn-white btn-xs pull-right" href="@Url.Action("LearnerNav", "../PCMSNavigation")">Back</a>

                    </div>

                </div>
            </div>

            <div class="ibox float-e-margins" style="box-shadow: 0 0 10px #808080">
                <div class="ibox-title">
                    <h5> Learner</h5>
                    <div class="ibox-tools">
                        <a title="Create Learner" class="btn btn-xs" style="background-color:transparent;border-color:steelblue;color:steelblue;width:auto" href='@Url.Action("Create", "../LRNR/Learners")' id="back"> <i class="fa fa-plus" style="color:steelblue"></i> Add</a>
                    </div>
                </div>
                <div class="ibox-content">

                    <ul id="menu" class="nav nav-tabs">
                        <li><a href="#tab1">Learner</a></li>
                        <li><a href="#tab2">Report</a></li>
                    </ul>
                    <div class="tab-folder">

                        <div id="tab1" class="tab-content">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins BoxAndShadow">
                                    <div class="ibox-title" style="border-top:none">
                                        <h5> Learners</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="table-responsive">
                                            <table class="table table-hover no-margins" style="white-space:nowrap">
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            Learner Code
                                                        </th>
                                                        <th>
                                                            Learner
                                                        </th>
                                                        <th>
                                                            School
                                                        </th>
                                                        <th>
                                                            Email Address
                                                        </th>
                                                        <th>
                                                            Contact Nr
                                                        </th>
                                                        <th>
                                                            Learner Address
                                                        </th>
                                                        <th>
                                                            Start Date
                                                        </th>
                                                        <th>
                                                            End Date
                                                        </th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var item in Model)
                                                    {
                                                        <tr>
                                                            <td>
                                                                @item.LearnerCode
                                                            </td>
                                                            <td>
                                                                @item.LearnerName
                                                            </td>
                                                            <td>
                                                                @item.TblSchool.SchoolCode
                                                            </td>
                                                            <td>
                                                                @item.LearnerEmail
                                                            </td>
                                                            <td>
                                                                @item.LearnerContactNr
                                                            </td>
                                                            <td>
                                                                @item.LearnerAddress
                                                            </td>
                                                            <td>
                                                                @item.LearnerStartDate
                                                            </td>
                                                            <td>
                                                                @item.LearnerEndDate
                                                            </td>
                                                            <td align="justify">

                                                                <a title="View Learner" class="btn btn-xs" style="background-color:transparent;border-color:seagreen;color:seagreen;width:auto" href='@Url.Action("Details", "../LRNR/Learners", new { id = item.LearnerId })' id="back"> <i class="fa fa-eye" style="color:seagreen"></i> View</a>

                                                                <a title="Edit Learner" class="btn btn-xs" style="background-color:transparent;border-color:steelblue;color:steelblue;width:auto" href='@Url.Action("Edit", "../LRNR/Learners", new { id = item.LearnerId })' id="back"> <i class="fa fa-pencil" style="color:steelblue"></i> Edit</a>

                                                                <a title="Delete Learner" class="btn btn-xs" style="background-color:transparent;border-color:red;color:red;width:auto" href='@Url.Action("Delete", "../LRNR/Learners", new { id = item.LearnerId })' id="back"> <i class="fa fa-trash" style="color:red"></i> Delete</a>

                                                        </tr>
                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <th>
                                                            Learner Code
                                                        </th>
                                                        <th>
                                                            Learner
                                                        </th>
                                                        <th>
                                                            School
                                                        </th>
                                                        <th>
                                                            Email Address
                                                        </th>
                                                        <th>
                                                            Contact Nr
                                                        </th>
                                                        <th>
                                                            Learner Address
                                                        </th>
                                                        <th>
                                                            Start Date
                                                        </th>
                                                        <th>
                                                            End Date
                                                        </th>
                                                        <th>Action</th>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div class="form-group w-100"></div>
                                        &nbsp;

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="tab2" class="tab-content">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins BoxAndShadow">
                                    <div class="ibox-title" style="border-top:none">
                                        <h5> Reports</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="table-responsive">
                                            <table class="table table-hover no-margins" style="white-space:nowrap">
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            Grade
                                                        </th>
                                                        <th>
                                                            Grade Mark
                                                        </th>                                                       
                                                        <th>
                                                            Start Date
                                                        </th>
                                                        <th>
                                                            End Date
                                                        </th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var item in Model)
                                                    {

                                                        if (item.TblGrades.Where(a => a.LearnerId == item.LearnerId).Any())
                                                        {
                                                            foreach (var items in item.TblGrades.Where(a => a.LearnerId == item.LearnerId))
                                                            {
                                                                <tr>
                                                                    <td>
                                                                        @items.GradeName
                                                                    </td>
                                                                    <td>
                                                                        @items.GradeMark
                                                                    </td>
                                                                    <td>
                                                                        @items.GradeStartDate
                                                                    </td>
                                                                    <td>
                                                                        @items.GradeEndDate
                                                                    </td>

                                                                    <td align="justify">
                                                                        <a title="Download Report" class="btn btn-xs" style="background-color:transparent;border-color:steelblue;color:steelblue;width:auto" href='@Url.Action("Report", "../LRNR/Grades", new { id = item.LearnerId })' id="back"> <i class="fa fa-download" style="color:steelblue"></i> Download</a>
                                                                    </td>
                                                                </tr>

                                                                
                                                            }
                                                        }



                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <th>
                                                            Grade
                                                        </th>
                                                        <th>
                                                            Grade Mark
                                                        </th>
                                                        <th>
                                                            Start Date
                                                        </th>
                                                        <th>
                                                            End Date
                                                        </th>
                                                        <th>Action</th>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div class="form-group w-100"></div>
                                        &nbsp;

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group w-100"></div>
                        &nbsp;
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    @Styles.Render("~/plugins/awesomeCheckboxStyles")
    @Styles.Render("~/plugins/clockpickerStyles")
    @Styles.Render("~/Content/OrnecyCss/OrnecyPrint.css")
    @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
    @Styles.Render("~/plugins/awesomeCheckboxStyles")
    @Styles.Render("~/plugins/clockpickerStyles")
    @Styles.Render("~/plugins/dateRangeStyles")
    @Styles.Render("~/Content/plugins/iCheck/iCheckStyles")
    @Styles.Render("~/Content/plugins/chosen/chosenStyles")
    @Styles.Render("~/plugins/switcheryStyles")
    @Styles.Render("~/plugins/jasnyBootstrapStyles")
    @Styles.Render("~/plugins/nouiSliderStyles")
    @Styles.Render("~/plugins/dataPickerStyles")
    @Styles.Render("~/Content/plugins/ionRangeSlider/ionRangeStyles")
    @Styles.Render("~/plugins/imagecropperStyles")
    @Styles.Render("~/Content/plugins/colorpicker/colorpickerStyles")
    @Styles.Render("~/plugins/select2Styles")
    @Styles.Render("~/plugins/touchSpinStyles")
    @Styles.Render("~/plugins/tagInputsStyles")
    @Styles.Render("~/plugins/duallistStyles")
    @Styles.Render("~/Content/HorizontalTimelIne.css")
    @Styles.Render("~/Content/plugins/sweetalert/sweetalert.css")

    <style>
        .tab-folder > .tab-content:target ~ .tab-content:last-child, .tab-folder > .tab-content {
            display: none;
        }

            .tab-folder > :last-child, .tab-folder > .tab-content:target {
                display: block;
            }

    </style>
}

@section Scripts {
    @Scripts.Render("~/plugins/dataTables")
    @Scripts.Render("~/bundles/jqueryui")
    @Scripts.Render("~/plugins/touchPunch")
    @Scripts.Render("~/plugins/iCheck")
    @Scripts.Render("~/plugins/dataPicker")
    @Scripts.Render("~/plugins/ionRange")
    @Scripts.Render("~/plugins/nouiSlider")
    @Scripts.Render("~/plugins/jasnyBootstrap")
    @Scripts.Render("~/plugins/switchery")
    @Scripts.Render("~/plugins/chosen")
    @Scripts.Render("~/plugins/knob")
    @Scripts.Render("~/plugins/imagecropper")
    @Scripts.Render("~/plugins/colorpicker")
    @Scripts.Render("~/plugins/clockpicker")
    @Scripts.Render("~/plugins/dateRange")
    @Scripts.Render("~/plugins/select2")
    @Scripts.Render("~/plugins/touchSpin")
    @Scripts.Render("~/plugins/tagInputs")
    @Scripts.Render("~/plugins/duallist")
    @Scripts.Render("~/Scripts/plugins/sweetalert/sweetalert.min.js")


    <script type="text/javascript">

        window.onload = function () {
            var i = 0; var previous_hash = window.location.hash;
            var x = setInterval(function () {
                i++; window.location.hash = "/noop/" + i;
                if (i == 10) {
                    clearInterval(x);
                    window.location.hash = previous_hash;
                }
            }, 10);
        }

        //-----------------Box shadow styling starts-------------
        $('.BoxAndShadow').css('box-shadow', ' 0 0 10px #808080');
        $('.BoxAndShadow').hover(function () {
            $(this).css('box-shadow', ' 0 0 20px #808080');
        }, function () {
            $(this).css('box-shadow', ' 0 0 10px #808080');
        });
        //----------------Box shadow styling ends----------------

        $(document).ready(function ()
        {
            $('#data_1 .input-group.date').datepicker({
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                calendarWeeks: true,
                autoclose: true,
                format: $("#DateFormat").val()

            });

        });

        $(".chosen-select").chosen({ width: "100%" });

    </script>

}
